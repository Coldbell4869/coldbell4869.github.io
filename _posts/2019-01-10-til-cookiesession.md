---
layout: post
title: Cookie 와 Session
tags:
  - TIL/Java
---

Today I Learned

TIL 2019-01-10

## Cookie 와 Session
### 쿠키
쿠키는 커피숍 도장찍는 쿠폰 생각하면 됨.
클라이언트가 쿠폰을 가지고있는거임.
커피숍 쿠폰을 클라이언트가 직접 들고 서버(커피숍)으로 간다.
커피숍은 쿠폰을 갖고가면 이사람은 전에 왔던 사람이구나 알 수 있음.
그러나 고객이 쿠폰을 잃어버려서 없으면 커피숍 입장에서는 처음온손님.

클라이언트가 쿠키정보를 헤더정보에 담아서 WAS에 리퀘스트하면
request.getcookies 메소드가 cookie 배열을 리턴해줌.
쿠키가 없으면 null이 나오고 있으면 쿠키(혹은 쿠키들)이 나옴.

::조사할 것 : 클라이언트는 특정 도메인 당 쿠키를 몇개 보관할 수 있는가?::

쿠폰은 서버에서 만드는 것. 쿠키는 WAS에서 만드는 객체임.
서블릿 서비스메소드에서 cookie c = new cookie(이름, 값) 으로 객체를 생성함.

response에 addCookie 혹은 setCookie로 헤더정보에 담아서 클라이언트에게 쿠키를 보냄.

‘헤더’에 담기 때문에 큰 정보를 담을 수 없음.

쿠키는 원래 서버쪽 기술이 아니라 브라우저쪽 기술이다.
쿠키는 브라우저에 저장됨. 넷스케이프가 만든 브라우저기술임 ㅋ
쿠키는 자바스크립트로 프론트엔드에서 설정할수도 있음.

쿠키는 클라이언트의 디스크에 저장되기 떄문에 보안상 중요한 정보는 들어가면 안됨…
그러나 이전에 로그인했던 사람인지 확인하거나 하는 데 유용하게 사용됨.

### 세션 
세션은 헬스클럽으로 비유.
헬스클럽에 손님이 등록하면 헬스클럽에서는 캐비넷 공간을 마련하고 키를 손님에게 줌.
다음에 손님이 헬스클럽에 또 갈때 키를 들고가면 자기 캐비넷에 물건을 넣을 수 있음.
손님은 키만 관리하면 됨.

처음 브라우저가 요청정보를 보내면 서버쪽에서는 이 요청정보를 보고 
1. 세션id (서버 안에서 유니크한 세션id값을 구한다. WAS마다 만드는 방식이 다름)
	key/value를 저장하는 구조의 형태(String/Object)의 자료구조 객체				(HttpSession)를 서버에 만듬.
2. WAS가 브라우저에 응답할 때 쿠키에다가 세션id를 담아서 줌.
3. 다음에 브라우저가 다시 요청정보를 보낼 때 전에 받은 세션id로 요청을 보냄
4. WAS가 세션id를 확인하고 해당하는 캐비넷을 찾아줌.

세션은 HttpSession session = request.getSession();

session.setAttribute(key, value);
session.getAttribute(object)

SessionScope 에서 사용되는 객체는 HttpSession 객체이다.

::cookie, httpsession이 어떤 메소드를 갖고있는지 조사하기::

::httpSession이 어떻게 동작하는지 발표하기::

[참고 - mt1716의 블로그](http://egloos.zum.com/mt1716/v/9791233)


::쿠키 삭제, 세션 삭제하는법 체크::

쿠키는 클라이언트에 있으니깐 서버에서 직접 지울 수 있는 방법이 없음.
세션은 서버에서 지워버리면 됨.
세션값 하나만 지울때는 remove.attribute

set,get,remove attribute() 메소드 삼형제.

--- 

## 숙제
오늘중으로 MySQL 설치하고 MySQL workbench 설치하기.
